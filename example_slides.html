<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Example slides for Kjera</title>
    <script type="module">
        // Load the three.js for 3d object visualization
        import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.127.0/build/three.module.js"
        import { OrbitControls } from "https://cdn.jsdelivr.net/npm/three@0.127.0/examples/jsm/controls/OrbitControls.js"
        import { PLYLoader } from "https://cdn.jsdelivr.net/npm/three@0.127.0/examples/jsm/loaders/PLYLoader.js"
        window.THREE = THREE;
        window.OrbitControls = OrbitControls;
        window.PLYLoader = PLYLoader
    </script>

    <!-- Load reveal.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/reveal.min.css"
        integrity="sha512-0AUO8B5ll9y1ERV/55xq3HeccBGnvAJQsVGitNac/iQCLyDTGLUBMPqlupIWp/rJg0hV3WWHusXchEIdqFAv1Q=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/reveal.js"
        integrity="sha512-35L3EFHQcGaTZ6QN9wAg9iK1hTPVCn8RGsscuXjm5JdmDRyOw+/IWJ4wavGkozQ8VDoddD7nV1psHgu/BYNpxQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- Load jQuery-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"
        integrity="sha512-jGR1T3dQerLCSm/IGEGbndPwzszJBlKQ5Br9vuB0Pw2iyxOy+7AK+lJcCC8eaXyz/9du+bkCy4HXxByhxkHf+w=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- Load 3DMol.js -->
    <script src="https://3Dmol.org/build/3Dmol-min.js"></script>
    <script src="https://3Dmol.org/build/3Dmol.ui-min.js"></script>

    <!-- Load MathJax for labex representation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS_HTML"></script>

    <!-- Include Source Sans Pro font -->
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>

    <!-- Load the style -->
    <!-- <link rel="stylesheet" type="text/css" href="https://miemiemmmm.b-cdn.net/Kjera/styles.css"> -->
    <link rel="stylesheet" type="text/css" href="./styles.css">

</head>

<body>
    <div class="reveal">
        <!-- Add laser pointer object -->
        <div class="laser-pointer"></div>
        <div class="slides" id="slide_container">
            <!-- Welcome page: the background image is set in the javascript part -->
            <section data-state="slide_TitlePage">
                <div style="position:relative; height:40%; width:100%; top:10%">
                    <p class="presentation_title" style="color:#1C226B; -webkit-text-stroke: 1.5px blue;">Example Slides
                        Using Kjera for Interactive slides</p>
                </div>
                <p class="presentation_info">Example Name</p>
                <p class="presentation_info">Date / Time</p>
                <p class="presentation_info">Affiliation</p>
                <p class="presentation_info">Affiliation2</p>
                <img id="welcome_bgimage" src="https://miemiemmmm.b-cdn.net/Kjera/Example_Image1.png"
                    class="bgimg_style_welcome">
            </section>

            <!--Template page-->
            <!--<section data-state="slide_">-->
            <!--    <p class="slide-title">This is a Template Slide for Demonstration</p>-->
            <!--    <div class="slide_content_style1">-->
            <!--        <p>This is a Template Main Context1</p>-->
            <!--        <p>This is a Template Main Context2</p>-->
            <!--        <p>This is a Template Main Context3</p>-->
            <!--    </div>-->
            <!--    <p class="reference_style">This is a template reference.</p>-->
            <!--</section>-->

            <section data-state="slide_OutlinePage">
                <p class="slide-title">Outline</p>
                <div class="box_style_mainbody">
                    <p class="slide_item_style1" style="font-size: 30px !important; ">1. Overall slide arrangement </p>
                    <p class="slide_item_style1" style="font-size: 30px !important; ">2. Source modules and style sheets
                    </p>
                    <p class="slide_item_style1" style="font-size: 30px !important; ">3. Image insertion </p>
                    <p class="slide_item_style1" style="font-size: 30px !important; ">4. Inline \(\LaTeX\) functions
                    </p>
                    <p class="slide_item_style1" style="font-size: 30px !important; ">5. View 3D objects via Three.js
                    </p>
                    <p class="slide_item_style1" style="font-size: 30px !important; ">6. View 3D molecules via 3Dmol.js
                    </p>
                    <p class="slide_item_style1" style="font-size: 30px !important; ">7. Other applets</p>
                    <p class="slide_item_style1" style="font-size: 30px !important; ">8. Summary</p>
                </div>

                <div class="image-style1">
                    <img src="https://miemiemmmm.b-cdn.net/Kjera/Example_Image1.png" class="bgimg_style_rbig">
                </div>
            </section>


            <!--
        Page template for chapter break.
        The class name of the <div> includes:
            chapter_break_container
        The <img> is automatically set to the default image for chapter break
        -->
            <section>
                <div class="chapter_break_container">
                    <p class="chapter_title">Overall slide arrangement</p>
                    <img>
                </div>
            </section>


            <section>
                <p class="slide-title" style="border:solid black; border-width: 3px;">This is the box for page title
                    (class: <i>slide-title</i>)</p>
                <div class="box_style_leftbound" style="border:solid blue; border-width: 3px;">
                    <p class="slide_item_style1">Left boundary box (class: <i>box_style_leftbound</i>) </p>
                    <p class="slide_item_style1">1. Use <i>div</i> plus a box style as text box to display slides
                        contents</p>
                    <p class="slide_item_style1">2. Attach <i>p</i> tags to itemize the slides (class:
                        <i>slide_item_style1</i>)</p>
                    <p class="slide_item_style1 code_block">
                        &ltdiv class="box_style_leftbound"&gt<br>
                        &nbsp;&nbsp;&ltp class="slide_item_style1"&gt1. Contents A&lt/p&gt<br>
                        &nbsp;&nbsp;&lt!-- Add more contents --&gt<br>
                        &lt/div&gt
                    </p>

                    <p class="slide_item_style1">3. The default <i>text-align</i> property for this box type is left
                    </p>

                </div>
                <div
                    style="position: absolute; inset: 60% 60% 10% 10% !important; border:solid black; border-width: 3px; text-align: center; background-color: bisque;">
                    <p class="slide_item_style1">This is an example box with<br> <i class="highlight_text">inset: 60%
                            60% 10% 10%</i></p>
                    <p class="slide_item_style1">Change the "inset" property (shortcut to <i>top, right, bottom,
                            left</i> properties) for new box styles</p>
                </div>

                <div class="box_style_rightbound" style="border:solid orange; border-width: 3px;">
                    <p class="slide_item_style1">Right boundary box (class: <i>box_style_rightbound</i>)</p>
                    <p class="slide_item_style1">1. It is advisable to attach images into text boxes for enhanced
                        control over image styling</p>
                    <p class="slide_item_style1">2. Images requires manual change on <i>width</i> or <i>height</i>
                        properties to fit to the size of the slide or text box </p>
                    <p class="slide_item_style1">3. The default <i>text-align</i> property for this box type is center
                    </p>

                    <img src="https://miemiemmmm.b-cdn.net/Kjera/Example_Image3.png"
                        style="width:40%; border:solid black; border-width: 3px;">
                    <p class="content_subtitle">Fig: The example image is 50% of its parent box's width. The figure
                        caption is using the class: <i>content_subtitle</i></p>
                </div>
                <p class="reference_style" style="border:solid black; border-width: 3px;">This is the box for potential
                    references (class: <i>reference_style</i>)</p>
            </section>


            <section>
                <p class="slide-title" style="border:solid black; border-width: 3px;">More box style examples</p>
                <div class="box_style_ulc" style="border:solid orange; border-width: 3px;">
                    <p class="slide_item_style1">Upper left corner (class: <i>box_style_ulc</i>)</p>
                </div>

                <div class="box_style_urc" style="border:solid pink; border-width: 3px;">
                    <p class="slide_item_style1">Upper right corner (class: <i>box_style_urc</i>)</p>
                </div>
                <div class="box_style_llc" style="border:solid blue; border-width: 3px;">
                    <p class="slide_item_style1">Lower left corner (class: <i>box_style_llc</i>)</p>
                </div>
                <div class="box_style_lrc" style="border:solid red; border-width: 3px;">
                    <p class="slide_item_style1">Lower right corner (class: <i>box_style_lrc</i>)</p>
                </div>

            </section>


            <section>
                <p class="slide-title" style="border:solid black; border-width: 3px;">More box style examples</p>
                <div class="box_style_mainbody" style="border:solid black; border-width: 5px;">
                    <p class="slide_item_style1">Main body box (class: <i>box_style_mainbody</i>)</p>
                </div>
                <div class="box_style_lowerbound" style="border:solid orange; border-width: 4px;">
                    <p class="slide_item_style1">Lower boundary box (class: <i>box_style_lowerbound</i>)</p>
                </div>
                <div class="box_style_fullrightbound" style="border:solid red; border-width: 3px;">
                    <p class="slide_item_style1">Full-height right boundary box (class: <i>box_style_fullrightbound</i>)
                    </p>
                    <p class="slide_item_style1">The major different between this box type and
                        <i>box_style_rightbound</i> is the height (<a class="highlight_text">5%-95%</a> VS <a
                            class="highlight_text">20%-95%</a> of the slide background) </p>

                </div>
            </section>


            <section>
                <div class="chapter_break_container">
                    <p class="chapter_title">Source modules and style sheets</p>
                    <img>
                </div>
            </section>


            <section>
                <p class="slide-title">Source modules and style sheets</p>
                <div class="box_style_leftbound onhover-top"
                    style="overflow-wrap: break-word; padding-left: 0 !important;">
                    <p class="slide_item_style1 highlight_text">JSDelivr CDN + Github</p>
                    <div class="content_subtitle">
                        <p class="slide_item_style1 highlight_text">Advantages:</p>
                        <p class="slide_item_style1">Free, ideal for lightweighted deployment</p>
                        <p class="slide_item_style1 highlight_text">Disadvantages:</p>
                        <p class="slide_item_style1">Cache update delays; Requires public repository; </p>
                    </div>

                    <p class="slide_item_style1">Compose the URL in the following way:</p>
                    <p class="code_block slide_item_style1">
                        https://cdn.jsdelivr.net/{type}/{user}/{repo}@{branch}/{file}<br>
                        <a style="font-size: 10px !important; color: blue; ">type: gh(Github); user: Github user name;
                            repo: Repo name; <br>branch: Branch name or tag; file: File path;
                        </a><br>
                        https://cdn.jsdelivr.net/gh/miemiemmmm/Kjera@main/styles.css // for the style sheet<br>
                        https://cdn.jsdelivr.net/gh/miemiemmmm/Kjera@main/modules.js // for the modules

                    </p>
                    <p class="slide_item_style1">To source style sheet (in head part): </p>
                    <p class="code_block slide_item_style1">&ltlink rel="stylesheet" type="text/css"
                        href="https://cdn.jsdelivr.net/gh/miemiemmmm/Kjera@main/styles.css"&gt</p>
                    <p class="slide_item_style1">To source JS modules (in script part): </p>
                    <p class="code_block slide_item_style1">import * as kjera from
                        "https://cdn.jsdelivr.net/gh/miemiemmmm/Kjera@main/modules.js"</p>
                </div>

                <div class="box_style_rightbound onhover-top" style="text-align: left !important;">
                    <p class="slide_item_style1 highlight_text">Commercial CDN</p>
                    <div class="content_subtitle">
                        <p class="slide_item_style1 highlight_text">Advantages:</p>
                        <p class="slide_item_style1">Higher stability and controllability; No constraints on visibility;
                        </p>
                        <p class="slide_item_style1 highlight_text">Disadvantages:</p>
                        <p class="slide_item_style1">Additional setup required; Requires extra fees; </p>
                    </div>
                    <p class="slide_item_style1">To source style sheet (in head part): </p>
                    <p class="code_block slide_item_style1">&ltlink rel="stylesheet" type="text/css"
                        href="https://miemiemmmm.b-cdn.net/Kjera/styles.css"&gt</p>
                    <p class="slide_item_style1">To source JS modules (in script part): </p>
                    <p class="code_block slide_item_style1">import * as kjera from
                        "https://miemiemmmm.b-cdn.net/Kjera/modules.js" </p>
                </div>
            </section>


            <section>
                <div class="chapter_break_container">
                    <p class="chapter_title">Image insertion</p>
                    <img>
                </div>
            </section>


            <section>
                <p class="slide-title">CDN-based image insertion </p>
                <div class="box_style_leftbound">
                    <p class="slide_item_style1">1. Just define the <i>src</i> attribute to the URL of the image</p>
                    <p class="slide_item_style1 code_block">
                        &ltimg src="https://cdn.jsdelivr.net/gh/miemiemmmm/Kjera@main/Example_Image1.png"
                        style="width:60%;"&gt
                    </p>
                    <p class="slide_item_style1">2. The image might overflow the text box, requires manually setup for
                        the width or height of the image </p>
                    <p class="slide_item_style1">3. Add extra style/class to realize more effect/interactions </p>
                    <p class="slide_item_style1">4. To match the width of the caption and image, add the caption to a
                        <i>div</i> with class <i>caption_container</i> and manually adjust the width of the caption (Fig
                        1)</p>
                </div>

                <div class="box_style_urc onhover-top"
                    style="border: solid red; border-width: 4px; text-align: center;">
                    <img src="https://cdn.jsdelivr.net/gh/miemiemmmm/Kjera@main/Example_Image1.png"
                        style="width:60%; filter:grayscale(100%)">
                    <div class="caption_container">
                        <p class="content_subtitle" style="width:60%;">Fig 1. Image from JSdelivr with a constrained
                            width (60% of its parent box). Applied an extra filter: grayscale(100%); The width of
                            caption is explicitly set to 60% for width alignment; Added class <i>onhover-top</i> effect.
                        </p>
                    </div>
                </div>

                <div class="box_style_lowerbound onhover-top" style="border: solid blue; border-width: 3px;">
                    <img src="https://miemiemmmm.b-cdn.net/Kjera/Example_Image3.png"
                        style="height:90%; filter:contrast(15%)">
                    <p class="content_subtitle">Fig 2. Image from commercial CDN with a constrained height (90% of its
                        parent box). Applied an extra filter: contrast(15%); The width of caption is by default
                        inherited from its parent box without explicit width alignment.</p>
                </div>
            </section>


            <section data-state="slide_FigFromGithub">
                <p class="slide-title">Fetch from Github API</p>
                <div class="box_style_leftbound" style="padding-left: 0 !important; ">
                    <p class="slide_item_style1 highlight_text">Asynchronous Image Fetching</p>
                    <p class="slide_item_style1">1. Assign an <i class="highlight_text">id</i> attribute to the image
                        for element selection </p>
                    <p class="slide_item_style1">2. Use JS callback functions to fetch and configure the image </p>
                    <p class="slide_item_style1 code_block">
                        // When displaying the slide, fetch and setup the image <br>
                        const github_api_url = "https://api.github.com/repos/miemiemmmm/Kjera/contents/"; <br>
                        kjera.set_repo(github_api_url); <br>
                        kjera.setupImage("fetch_img_1", "Example_Image2.png"); <br>
                        <a class="highlight_text">// This example used filepath in Github repo, also supports base64 (as
                            in Fig 2) or URL of the image</a>
                    </p>
                    <p class="slide_item_style1">3. Set the styles of image in its HTML style or in JS callback</p>

                    <img id="fetch_img_1" class="image-gray" style="height:35% !important">
                    <p class="content_subtitle">Fig 1: Asynchronous fetch from Github; The <i>id</i> of the image is
                        "fetch_img_1" and the desired image is "Example_Image2.png"; Applied class: <i>image-gray</i>
                        for the on-hover-removal of the gray-scale filter. </p>
                    <p class="slide_item_style1 highlight_text"></p>

                </div>

                <div class="box_style_rightbound" style="padding-left: 0 !important; text-align: left;">
                    <p class="slide_item_style1 highlight_text">Batch Image Fetching </p>
                    <p class="slide_item_style1">1. Retrieve all image data from the repository </p>
                    <p class="slide_item_style1">2. Store all images in a global object, using file names as keys and
                        their base64-encoded strings as values, for later access </p>
                    <p class="slide_item_style1">3. Perform this operation during slide initialization to minimize
                        repetitive fetching and enable advanced effects</p>

                    <p class="code_block">
                        // Already setup repo's url as in Fig 1 demo. <br>
                        const FIGURES = {}; <br>
                        kjera.getAllImages(FIGURES).then(function(ret){ <br>
                        &nbsp;&nbsp;// Figures are by queried, named, and put to the FIGURES object <br>
                        &nbsp;&nbsp;// Do something with the images in FIGURES <br>
                        });
                    </p>

                    <img id="fetch_img_2" style="height:35% !important;">
                    <p class="content_subtitle">Fig 2: After quering all of images in the repository, swtich to the next
                        image every 0.8 seconds. </p>

                </div>
            </section>


            <section>
                <div class="chapter_break_container">
                    <p class="chapter_title">Inline \(\LaTeX\) functions</p>
                    <img>
                </div>
            </section>


            <section data-state="">
                <p class="slide-title">Use MathJax for formula insertion </p>
                <div class="box_style_leftbound">
                    <p class="slide_item_style1">1. To interpret LaTeX, use a backslash followed by parentheses: <a
                            class="highlight_text">\( \backslash( \) LaTeX expressions \(\backslash) \) </a> </p>
                    <p class="slide_item_style1">2. Use a &ltp&gt tag for standalone formulas </p>
                    <p class="slide_item_style1">3. Embed inline formulas directly within the text </p>
                    <p class="slide_item_style1 code_block">
                        &ltp&gt \(\backslash(\)f(x)=\exp(-x^{2})\(\backslash)\) &lt/p&gt <br>
                        arbitrary real constants \(\backslash(\)a\(\backslash)\), \(\backslash(\)b\(\backslash)\) and
                        non-zero \(\backslash(\)c\(\backslash)\). <br>
                        <!-- <p class="slide_item_style1 highlight_text"> \( f(x)=\exp(-x^{2}) \) </p> -->
                    </p>
                </div>
                <div class="box_style_rightbound" style="text-align: left !important;">
                    <p class="slide_item_style1 highlight_text">An example sentences from Wiki: </p>
                    <p class="slide_item_style1">In mathematics, a Gaussian function, often simply referred to as a
                        Gaussian, is a function of the base form </p>
                    <p class="slide_item_style1 highlight_text"> \( f(x)=\exp(-x^{2}) \) </p>
                    <p class="slide_item_style1">and with parametric extension </p>
                    <p class="slide_item_style1 highlight_text"> \( f(x)=a\exp \left(-{\frac {(x-b)^{2}}{2c^{2}}}\right)
                        \) </p>
                    <p class="slide_item_style1">for arbitrary real constants <a class="highlight_text">\(a\)</a>, <a
                            class="highlight_text">\(b\)</a> and non-zero <a class="highlight_text">\(c\)</a>.</p>

                </div>
            </section>


            <section>
                <div class="chapter_break_container">
                    <p class="chapter_title">View 3D objects via Three.js </p>
                    <img>
                </div>
            </section>


            <section data-state="slide_3DModels">
                <div class="slide-title">View 3D objects via Three.js </div>
                <div class="box_style_leftbound">
                    <p class="slide_item_style1">1. Reserve a &ltdiv&gt for further rendering of the 3D object</p>
                    <p class="code_block">
                        &ltdiv id="model_1" style="height: 90% !important; width: 90% !important"&gt&lt/div&gt
                    </p>
                    <p class="slide_item_style1">2. Prevent duplicate canvas addition upon slide replay </p>
                    <p class="slide_item_style1 code_block">
                        if (document.getElementById("model_1").querySelector("canvas") == null){<br>
                        &nbsp;&nbsp;// Render the 3D object only if the object is not initialized <br>
                        }
                    </p>
                    <p class="slide_item_style1">3. Initializing a PLY object will return scene, renderer, camera and
                        light for further operations</p>
                    <p class="slide_item_style1 code_block">
                        kjera.set_bgcolor("#FFF9DE") // change the background color<br>
                        kjera.initPLYObject("model_1",
                        "https://miemiemmmm.b-cdn.net/GM_Feb2024/ViewExample_THR.ply").then(function(ret){ <br>
                        &nbsp;&nbsp;// Return is an array of object: [scene, renderer, camera, light] <br>
                        &nbsp;&nbsp;var scene = ret[0] <br>
                        &nbsp;&nbsp;var renderer = ret[1] <br>
                        &nbsp;&nbsp;var camera = ret[2] <br>
                        &nbsp;&nbsp;var light = ret[3] <br>
                        &nbsp;&nbsp;// Do something with the scene, renderer, camera, and light <br>
                        })<br>
                    </p>
                </div>

                <div class="box_style_rightbound">
                    <div id="model_1" style="height: 90% !important; width: 90% !important"></div>
                    <p class="slide_item_style1 " style="font-size: 20px !important; padding-left: 0 !important;">Stage
                        1: Voxelized feature of Thr</p>
                </div>

            </section>


            <section>
                <div class="chapter_break_container">
                    <p class="chapter_title">View 3D molecules via 3Dmol.js</p>
                    <img>
                </div>
            </section>


            <section data-state="slide_3DmolExample">
                <div class="slide-title">View 3D molecules via 3Dmol.js </div>
                <div class="box_style_leftbound">
                    <p class="slide_item_style1">1. Similar to PLY object display, reserve a <i>&ltdiv&gt</i> and a
                        canvas will be attached after stage initialization</p>
                    <p class="slide_item_style1">2. Remove the existing canvas before Initializing the molecule (Due to
                        some implicit reason in 3Dmol)</p>
                    <p class="code_block">
                        var thecanvas = document.getElementById("3dmol_viewer").querySelector("canvas");<br>
                        if (thecanvas){ thecanvas.remove(); }<br>
                    </p>
                    <p class="slide_item_style1">3. Kjera provides basic wrappers for molecule initialization and the
                        viewer is returned for further operations</p>
                    <p class="code_block">
                        kjera.set_bgcolor("#F85F73") // change the background color<br>
                        kjera.add3DMolObject("3dmol_viewer",
                        "https://miemiemmmm.b-cdn.net/Kjera/protein.pdb").then(ret=>{ <br>
                        &nbsp;&nbsp;// Do something with the viewer <br>
                        }) <br>
                    </p>
                </div>

                <div class="box_style_rightbound">
                    <div id="3dmol_viewer" style="height: 100% !important; width: 100% !important; text-align: center;">
                    </div>
                    <p class="content_subtitle">Stage 1. An example structure with protein as ribbon and ligand as
                        sticks. A \(16\times16\times16\) grid is aligned to the center of the ligand with a transprent
                        light green box. </p>
                </div>
            </section>


            <section>
                <div class="chapter_break_container">
                    <p class="chapter_title">Other applets</p>
                    <img>
                </div>
            </section>


            <section data-state="">
                <div class="slide-title">Other applets </div>
                <div class="box_style_leftbound">
                    <p class="slide_item_style1">1. Click number 1 to activate the laster pointer. </p>
                    <p class="slide_item_style1">2. On-hover display (class: <a class="onhover_show"
                            style="border: solid black;">onhover_show</a>) and on-click fixation. </p>
                    <p class="slide_item_style1">3. On-hover zoom (class: an <i>img</i> tag inside a gallery item:
                        <i>gallery-item</i>, <i>gallery-item2</i>, <i>gallery-item3</i>) (Fig 1) </p>
                    <p class="slide_item_style1">4. On-hover gray-scale filter (Fig 1)</p>

                    <p class="slide_item_style1">This slide does not delve into the DOM element interactions and
                        animations. However, you may explore and create your custom animations or applets. </p>
                </div>
                <div class="box_style_rightbound">
                    <div class="gallery-item">
                        <img src="https://miemiemmmm.b-cdn.net/Kjera/Example_Image1.png" style="width: 70%; "
                            class="image-gray">
                        <p class="content_subtitle">Fig 1: On-hover zoom and gray-scale filter</p>
                    </div>
                </div>
            </section>


            <section data-state="">
                <div class="slide-title">Summary </div>
                <div class="box_style_leftbound">
                    <p class="slide_item_style1"><a href="https://github.com/miemiemmmm/Kjera" target="_blank">Kjera</a>
                        provides a template for interactive slides with 3D objects and molecules. </p>
                    <p class="slide_item_style1">For further technical problems, you might need to refer to the original
                        API references for solutions. </p>

                    <p class="slide_item_style1">Packages used in this project: </p>
                    <p class="slide_item_style1 code_block">
                        <a href="https://revealjs.com/" target="_blank">Reveal.js</a>: Presentation framework<br>
                        <a href="https://threejs.org/" target="_blank">Three.js</a>: 3D object rendering<br>
                        <a href="https://3dmol.csb.pitt.edu/" target="_blank">3Dmol.js</a>: 3D molecule rendering<br>
                        <a href="https://mathjax.org/" target="_blank">MathJax</a>: LaTeX rendering<br>
                        <a href="https://jquery.com/" target="_blank">jQuery</a>: DOM element manipulation<br>
                    </p>

                </div>
                <div class="box_style_rightbound " style="text-align: left; height:auto !important; ">
                    <div class="content_subtitle">
                        <p class="slide_item_style1 highlight_text">Kind suggestions: </p>
                        <p class="slide_item_style1">Choose an intelligent IDE (such as <a
                                href="https://code.visualstudio.com/">VSCode</a>) or an AI assistant to streamline the
                            repetitive aspects of HTML coding</p>
                        <p class="slide_item_style1">The GitHub API imposes <a
                                href="https://docs.github.com/rest/overview/resources-in-the-rest-api#rate-limiting">limitation</a>
                            on anonymous file requests.
                            Consider providing an access token (<a class="highlight_text">READ-ONLY</a>) or using a
                            server to fetch contents directly to overcome this constraint. </p>
                        <p class="slide_item_style1">Adjust zoom levels for varying screen resolutions (for instance,
                            this slide set is optimized for a 2K monitor but may require ~80% zoom on 1080p monitors and
                            ~150% for 4K monitors).</p>
                        <p class="slide_item_style1"></p>
                        <p class="slide_item_style1 highlight_text">Good luck and have fun!</p>
                    </div>
                </div>
            </section>


            <!--<section data-state="slide_">-->
            <!--    <p class="slide-title">This is a Template Slide for Demonstration</p>-->
            <!--    <div class="box_style_leftbound">-->
            <!--        <p>This is a Template Main Context1</p>-->
            <!--        <p>This is a Template Main Context2</p>-->
            <!--        <p>This is a Template Main Context3</p>-->
            <!--    </div>-->
            <!--    <p class="reference_style">This is a template reference.</p>-->
            <!--</section>-->

        </div>
    </div>



    <script type="module">
        // Source modules via JSDelivr CDN + Github
        // import * as kjera from "https://cdn.jsdelivr.net/gh/miemiemmmm/Kjera@main/modules.js" 

        // Source modules via Commercial CDN
        import * as kjera from "https://miemiemmmm.b-cdn.net/Kjera/modules.js"

        // Source modules locally
        // import * as kjera from "./modules.js" 

        ////////////////////////////////////////////////////
        ////// Global Variables and On-load Actions ////////
        ////////////////////////////////////////////////////

        // NOTE: If you are using Private Github Repo to host your slides,
        //       you need to generate a Fine-Grained Personal Access Tokens
        //       with the content access to your repo and replace the GITHUB_FINE_GRAINED_TOKEN with the token
        //       If you are using Public Github Repo, Just comment the Authorization line
        // For more details about Fine-Grained Personal Access Tokens:
        // https://github.blog/2022-10-18-introducing-fine-grained-personal-access-tokens-for-github/

        // NOTE: Replace the USER_NAME and REPO_NAME with your own Github user name and repository name
        // https://api.github.com/repos/<USER_NAME>/<REPO_NAME>/contents/
        const repo_url = "https://api.github.com/repos/miemiemmmm/Kjera/contents/";
        kjera.set_repo(repo_url)

        // Setting up token could improve the amount of traffic you can send to Github
        // TODO remove this token before pushing the code ODOT 
        // kjera.set_token("YOUR_GITHUB_FINE_GRAINED_TOKEN"); 


        const PRELOAD_FIGURES = true;
        const FIGURES = {};
        if (PRELOAD_FIGURES == true) {
            kjera.getAllImages(FIGURES);
        }

        // Whether or not to PRELOAD all images from the given Github Repo
        // NOTE: Perticularly useful when you do the final presentation
        //       You might want to disable it when you are still developing your slides

        const img_university_logo = "uzh_logo_e_pos_web_main.jpg";
        const img_welcome = "Example_Image1.png";
        const img_chapter_break = "Example_Image2.png";

        // Default background color for all 3D scenes
        kjera.set_bgcolor("#FFF9DE");

        /////////////////////////////////////////////////
        //////////// On-load Functions to do ////////////
        /////////////////////////////////////////////////

        // Declare global image variables for potential reuse
        var univ_logo
        (async () => {
            // Set the logo of your institute
            univ_logo = await kjera.getImageb64(repo_url + img_university_logo);
            var imgdiv = document.createElement('img');
            imgdiv.classList.add('institute_logo');
            imgdiv.src = univ_logo;
            document.body.appendChild(imgdiv);
        })()

        Reveal.initialize({
            // Set the theme to white
            theme: 'white',
            // Set the transition style to slide
            transition: 'convex',
            backgroundTransition: "zoom"
        });


        ///////////////////////////////////////////////////////////////
        ////////////// Initialize the reveal.js framework /////////////
        ///////////////////////////////////////////////////////////////
        Reveal.addEventListener('slidechanged', function (event) {
            if (event.currentSlide && event.currentSlide.getAttribute('data-state') == "slide_FigFromGithub") {
                const github_api_url = "https://api.github.com/repos/miemiemmmm/Kjera/contents/";
                kjera.set_repo(github_api_url);
                let img1 = document.getElementById("fetch_img_1");
                var start_time = new Date().getTime();
                kjera.setupImage("fetch_img_1", "Example_Image2.png").then(function (ret) {
                    // Reset the caption text 
                    var text = $("#fetch_img_1").next().html();
                    var new_text = text + " <a class='highlight_text'>Figure loading time: " + (new Date().getTime() - start_time) + "ms (This message is added via JS callback) </a>"
                    $("#fetch_img_1").next().html(new_text)
                }
                )

                var start_time2 = new Date().getTime();
                const FIGURES = {};
                kjera.getAllImages(FIGURES).then(
                    function (ret) {
                        // change image source every 1.5 seconds
                        var text = $("#fetch_img_2").next().html();
                        var file_nr = Object.keys(FIGURES).length
                        var new_text = text + " <a class='highlight_text'>Figure loading time: " + (new Date().getTime() - start_time2) + "ms; Retrieved: " + file_nr + " files including " + Object.keys(FIGURES).join(", ") + " (This message is added via JS callback)</a>"
                        $("#fetch_img_2").next().html(new_text)

                        let img = document.getElementById("fetch_img_2");
                        img.src = FIGURES["Example_Image1.png"];
                        let c = 0;
                        let keys = Object.keys(FIGURES);
                        setInterval(function () {
                            img.src = FIGURES[keys[c % keys.length]];
                            c += 1;
                        }, 800)
                    }
                )

            }
        });

        //////////// A Typical Animation Function ////////////
        // function animate() {
        //     requestAnimationFrame(animate);
        //     renderer.render(scene, camera);
        // }
        // animate();
        /////////////////////////////////////////////////////
        Reveal.addEventListener('slidechanged', function (event) {
            if (event.currentSlide && event.currentSlide.getAttribute('data-state') == "slide_3DModels") {
                if (document.getElementById("model_1").querySelector("canvas") == null) {
                    kjera.set_bgcolor("#FFF9DE")
                    kjera.initPLYObject("model_1", "https://miemiemmmm.b-cdn.net/GM_Feb2024/ViewExample_THR.ply").then(function (ret) {
                        var scene = ret[0]
                        var renderer = ret[1]
                        var camera = ret[2]
                        var light = ret[3]
                        // Animation loop
                        function animate() {
                            requestAnimationFrame(animate);
                            renderer.render(scene, camera);
                        }
                        console.log("Do the animation")
                        animate();
                    })
                }

            }
        });

        Reveal.addEventListener('slidechanged', function (event) {
            if (event.currentSlide && event.currentSlide.getAttribute('data-state') == "slide_3DmolExample") {
                var thecanvas = document.getElementById("3dmol_viewer").querySelector("canvas");
                if (thecanvas) { thecanvas.remove(); }
                console.log("Reset the canvas size for the 3Dmol viewer")
                kjera.set_bgcolor("#F85F73")
                kjera.add3DMolObject("3dmol_viewer", "https://miemiemmmm.b-cdn.net/Kjera/protein.pdb").then(function (viewer) {
                    // Set styles for the protein structure
                    viewer.setStyle({}, { cartoon: { color: "gray" } });
                    kjera.addModel(viewer, "https://miemiemmmm.b-cdn.net/Kjera/ligand.mol2").then(function (viewer) {
                        // var ligandSelection = {within: {distance: 4, sel:{model: 1}}, byres:true};
                        // var ligandSelection = {and:[{model:1, expand:5}, {model:[0,1]}], byres:true}; 
                        var ligandSelection = { model: 1, expand: 5, byres: true };
                        console.log(viewer.selectedAtoms(ligandSelection))
                        viewer.setStyle(ligandSelection, { stick: { colorscheme: "greenCarbon" } });
                        viewer.render();
                    }
                    )

                    // Add Grid points
                    const gridcenter = [8.77, -26.88, 4.23];  // Manually set the center of the grid
                    const ls = [16, 16, 16];
                    const dims = [16, 16, 16];
                    viewer = kjera.renderGridPoints(viewer, gridcenter, ls, dims);
                    viewer.addBox({
                        center: { x: gridcenter[0], y: gridcenter[1], z: gridcenter[2] },
                        dimensions: { w: ls[0], h: ls[1], d: ls[2] },
                        color: '#adf7d1',
                        opacity: 0.85
                    })
                    viewer.zoomTo();
                    viewer.render();
                })
            }
        });



        /////////////////////////////////////////////
        ////// Auxiliary and onchange functions /////
        /////////////////////////////////////////////
        Reveal.addEventListener('slidechanged', function (event) {
            // Add the footer page number
            var pageNumber = event.indexh + 1;
            // Add page number to the footer
            var pageNumber = event.indexh + 1;
            var totalPages = Reveal.getTotalSlides();
            var pageString = pageNumber + '/' + totalPages;
            var pageNumberElement = document.querySelector('.page_number');
            if (pageNumberElement) {
                pageNumberElement.innerHTML = pageString;
                pageNumberElement.style.zIndex = 5
            } else {
                var pagediv = document.createElement('div');
                pagediv.classList.add('page_number');
                pagediv.innerHTML = pageString;
                pagediv.style.zIndex = 5;
                document.body.appendChild(pagediv);
            }

            const viewportWidth = window.innerWidth || document.documentElement.clientWidth;
            const viewportHeight = window.innerHeight || document.documentElement.clientHeight;
            console.log("ViewPort Width:", viewportWidth, "/ Height", viewportHeight);

            // setup break slide
            var found_chapterbreak = event.currentSlide.querySelector('.chapter_break_container');
            var found_chapterbreakimg = event.currentSlide.querySelector('.chapter_break_container img');
            if (found_chapterbreak && found_chapterbreakimg.src.slice(0, 4) !== "data") {
                found_chapterbreakimg.className = "bgimg_style_rsmall"
                found_chapterbreakimg.src = img_chapter_break
                found_chapterbreakimg.style.zIndex = -10
            }
            var slide_play_note = document.getElementById("slideplay_helper");
            // Remove the slide play helper if it exists
            if (slide_play_note) {
                slide_play_note.style.display = "none";
            }
        });

        // Laser pointer function for the slides
        // Enable/disable the laser pointer by pressing the "1" key
        const laserPointer = document.querySelector('.laser-pointer');
        var mouseX = 0;   // Global variable to store mouse position
        var mouseY = 0;
        var usingLaser = false;  // Global variable to store the use of laser pointer
        document.addEventListener('keydown', (event) => {
            if (event.key == "1" && !usingLaser) {
                laserPointer.style.opacity = 1;
                usingLaser = true;
                $('body').css('cursor', 'none');
                laserPointer.style.left = mouseX - laserPointer.clientWidth / 2 + 'px';
                laserPointer.style.top = mouseY - laserPointer.clientHeight / 2 + 'px';
            } else if (event.key == "1" && usingLaser) {
                laserPointer.style.opacity = 0;
                usingLaser = false;
                $('body').css('cursor', 'default');
            }
        });

        // Move the laser pointer with the mouse
        document.addEventListener('mousemove', (event) => {
            if (usingLaser) {
                laserPointer.style.left = event.clientX - laserPointer.clientWidth / 2 + 'px';
                laserPointer.style.top = event.clientY - laserPointer.clientHeight / 2 + 'px';
            }
        });

        // Record the pointer position and update the laser pointer position
        document.addEventListener('mousemove', (event) => {
            mouseX = event.clientX;
            mouseY = event.clientY;
            if (usingLaser) {
                laserPointer.style.left = event.clientX - laserPointer.clientWidth / 2 + 'px';
                laserPointer.style.top = event.clientY - laserPointer.clientHeight / 2 + 'px';
            }
        });


        // Onhover zooming functions for gallery items
        $(".gallery-item img, .gallery-item2 img, .gallery-item3 img").hover(
            // Translate the figcaption by 1/2 of the image height 
            function () {
                let img_height = $(this).height();
                $(this).next().css({ "transform": "translateY(" + img_height / 2 + "px)" });
                $(this).css({ "z-index": 999 });
            },
            function () {
                $(this).next().css({ "transform": "translateY(0px)" });
                $(this).css({ "z-index": 0 });
            }
        )
        $(".image-gray").hover(
            function () {
                $(this).css({ "filter": "grayscale(0%)" });
            },
            function () {
                $(this).css({ "filter": "grayscale(100%)" });
            }
        )


        $(".onhover-top").hover(
            function () {
                $(this).css({ "z-index": 999 });
            },
            function () {
                $(this).css({ "z-index": 0 });
            }
        )

        // Popup a one-time notification above the "controls-arrow" 
        var arrow_clicked = false;
        document.addEventListener('DOMContentLoaded', function () {
            var notification = document.createElement('div');
            notification.innerHTML = "Click the arrow<br> or right key";
            notification.id = "slideplay_helper";
            notification.classList.add('content_subtitle');
            notification.classList.add('slideplay_notification');
            document.body.appendChild(notification);

            // Onclick removal of the slide play helper
            notification.onclick = function () {
                notification.style.display = "none";
            }
        });

        $(".onhover_show").click(
            function () {
                $(this).removeClass("onhover_show");
            }
        )

    </script>

</body>

</html>